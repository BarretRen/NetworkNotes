在蓝牙 Beacon 技术中，UUID、Major 和 Minor 是三个非常核心且标准的标识符，它们共同工作来提供不同层级的识别和定位信息。
这套标识方案最初由苹果公司在其 iBeacon 协议中提出，由于其简洁和高效，已成为业界最广泛使用的 Beacon 标准之一。

## iBeacon 广播包结构

一个蓝牙 4.0+的广播包是由多个 **AD Structure** (广告数据结构) 组成的。每个 AD Structure 包含三部分：

1.  **Length** (1 字节)：表示后面 **AD Type** + **AD Data** 字段的总长度。
2.  **AD Type** (1 字节)：表示后面所跟数据的类型（例如，Flags，完整设备名，制造商特定数据等）。
3.  **AD Data** (可变长度)：实际的数据内容。

iBeacon 的信息就存放在一个 **AD Type** 为 `0xFF` (表示“制造商特定数据”) 的 AD Structure 中。

一个完整的 iBeacon 制造商特定数据段的结构如下表所示：

| 字节偏移 (从 AD Data 开始) | 长度 (字节) | 说明                                | 示例值 (十六进制)                   |
| :------------------------- | :---------- | :---------------------------------- | :---------------------------------- |
| **0-1**                    | 2           | **公司标识符** (Company Identifier) | `0x004C` (苹果公司)                 |
| **2-3**                    | 2           | **iBeacon 标识符** (Beacon Type)    | `0x0215` (固定值，表示这是 iBeacon) |
| **4-19**                   | 16          | **Proximity UUID** (128-bit)        | `B9407F30F5F8466EAFF925556B57FE6D`  |
| **20-21**                  | 2           | **Major** (16-bit)                  | `0x0001` (即 `1` )                  |
| **22-23**                  | 2           | **Minor** (16-bit)                  | `0x000A` (即 `10` )                 |
| **24**                     | 1           | **校准功率** (Measured Power)       | `0xC5` (即 `-59 dBm`)               |

## 实际示例

假设我们有一个 iBeacon，其配置如下：

- **UUID**: `B9407F30-F5F8-466E-AFF9-25556B57FE6D`
- **Major**: `1` (十进制)
- **Minor**: `10` (十进制)
- **校准功率**: `-59 dBm` (在 1 米处测量到的 RSSI 信号强度值)

那么，它的广播包中 **制造商特定数据** 部分将包含以下**连续的字节序列**（十六进制表示）：

```
// 完整的 Manufacturer Specific Data AD Structure
02 01 06 1A FF 4C 00 02 15 B9 40 7F 30 F5 F8 46 6E AF F9 25 55 6B 57 FE 6D 00 01 00 0A C5
```

让我们来逐段解析这个字节序列：

- **`02 01 06`**：

  - `02`：长度，表示后面的 AD Type 和 AD Data 共 2 字节。
  - `01`：AD Type，表示“Flags”。
  - `06`：AD Data，Flags 内容 (`LE General Discoverable Mode` + `BR/EDR Not Supported`)。

- **`1A FF 4C 00 02 15 ... C5`**：这就是承载 iBeacon 数据的 **制造商特定数据** 结构。
  - `1A`：长度，表示后面的 `FF` + 制造商数据 共 26 字节 (0x1A = 26)。
  - `FF`：AD Type，`0xFF` 代表“制造商特定数据”。
  - `4C 00`：公司标识符，`0x004C` 代表苹果公司 (Little-Endian 格式)。
  - `02 15`：iBeacon 子标识符，`0x0215` 固定表示这是一个 iBeacon 帧。
  - `B9 40 7F 30 F5 F8 46 6E AF F9 25 55 6B 57 FE 6D`：**Proximity UUID** (16 字节)，注意这里**没有连字符**，是连续的十六进制数。
  - `00 01`：**Major** 值 (`0x0001` = 十进制 `1`)。
  - `00 0A`：**Minor** 值 (`0x000A` = 十进制 `10`)。
  - `C5`：**校准功率** (`0xC5` 是一个有符号的 8 位整数，换算成十进制是 `-59`)。
